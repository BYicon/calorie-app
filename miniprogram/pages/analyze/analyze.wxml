<!-- ä¸»è¦å†…å®¹ -->
<view class="main-content">
  <!-- å‘¨æœŸé€‰æ‹©å™¨ -->
  <view class="period-selector">
    <button class="{{period === 'day7' ? 'active' : ''}}" bindtap="changePeriod" data-period="day7" data-days="7">7å¤©</button>
    <button class="{{period === 'day30' ? 'active' : ''}}" bindtap="changePeriod" data-period="day30" data-days="30">30å¤©</button>
    <!-- <button class="{{period === 'day90' ? 'active' : ''}}" bindtap="changePeriod" data-period="day90" data-days="90">90å¤©</button> -->
    <!-- <button class="{{period === 'day365' ? 'active' : ''}}" bindtap="changePeriod" data-period="day365">365å¤©</button>  -->
  </view>
  
  <!-- çƒ­é‡æ‘„å…¥è¶‹åŠ¿å›¾è¡¨ -->
  <view class="chart-container">
    <view class="chart-header">
      <!-- <view class="chart-title">
        <text class="icon">ğŸ“ˆ</text>
        <text>çƒ­é‡æ‘„å…¥è¶‹åŠ¿</text>
      </view> -->
      <!-- æ·»åŠ å½“å‰æ˜¾ç¤ºçš„æ—¶é—´èŒƒå›´ -->
      <view class="chart-date">{{currentDateRange}}</view>
    </view>
    
    <view class="chart {{period}}">
      <view class="limit-line" style="top: {{limitLineTop}};"></view>
      <view class="limit-label" style="top: {{limitLabelTop}}">ç›®æ ‡ {{calorieTarget}}åƒå¡</view>
      
      <!-- æ‚¬æµ®æç¤ºæ¡† -->
      <view class="chart-tooltip {{selectedIndex !== -1 ? 'show' : ''}}" style="left: {{tooltipLeft}}px;">
        <view class="tooltip-content">
          <view class="tooltip-date">{{selectedBar.label}}</view>
          <view class="tooltip-value">{{selectedBar.value}}åƒå¡</view>
        </view>
      </view>
      
      <view class="chart-bars" bindtouchmove="onChartTouchMove" bindtouchend="onChartTouchEnd">
        <view wx:for="{{chartData}}" wx:key="index" wx:for-item="barItem" 
              class="chart-bar {{selectedIndex === index ? 'highlight' : ''}}" 
              style="height: {{barItem.height}};" 
              data-index="{{index}}">
          <view class="chart-bar-label" wx:if="{{barItem.showLabel}}">{{barItem.label}}</view>
        </view>
      </view>
    </view>
  </view>
  
  <!-- ç»Ÿè®¡æ•°æ® -->
  <view class="stats-grid">
    <view class="stat-card">
      <view class="value">{{stats.averageDailyIntake}}</view>
      <view class="label">å¹³å‡æ¯æ—¥æ‘„å…¥ (åƒå¡)</view>
    </view>
    <view class="stat-card">
      <view class="value">{{stats.overStandardDays}}</view>
      <view class="label">è¶…æ ‡å¤©æ•°</view>
    </view>
    <view class="stat-card">
      <view class="value">{{stats.highestIntake}}</view>
      <view class="label">æœ€é«˜æ‘„å…¥ (åƒå¡)</view>
    </view>
    <view class="stat-card">
      <view class="value">{{stats.lowestIntake}}</view>
      <view class="label">æœ€ä½æ‘„å…¥ (åƒå¡)</view>
    </view>
  </view>
  
  <!-- æ™ºèƒ½åˆ†æ -->
  <!-- <view class="analysis-card">
    <view class="card-title">
      <text class="icon">ğŸ’¡</text>
      <text>æ™ºèƒ½åˆ†æ</text>
    </view>
    <view class="card-content">
      <text>{{analysis.insight}}</text>
    </view>
  </view> -->
  
  <!-- å»ºè®® -->
  <!-- <view class="analysis-card">
    <view class="card-title">
      <text class="icon">ğŸ¥—</text>
      <text>å»ºè®®</text>
    </view>
    <view class="card-content">
      <text>{{analysis.suggestion}}</text>
    </view>
  </view>-->
</view>  