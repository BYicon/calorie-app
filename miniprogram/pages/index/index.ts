import { login } from "../../api/auth";
import { redirectPage } from "../../shared/helper";
import { STATIC_FILE_URL } from "../../config/env";


Page({
  data: {
    todayTimestamp: 0,
    welcomeImage: `${STATIC_FILE_URL}/welcome.png`,
    hasLogin: false,
  },
  toRecord() {
    wx.switchTab ({
      url: '/pages/record/record',
    });
  },
  agree() {
    console.log('agree ğŸš€ğŸš€ğŸš€');
  },
  disagree() {
    console.log('disagree ğŸš€ğŸš€ğŸš€');
  },
  onLoad(e) {
    login().then((userInfo) => {
      console.log('onLoad userInfo ğŸš€ğŸš€ğŸš€', userInfo);
      this.setData({
        calorieTarget: userInfo.calorieTarget,
        hasLogin: true,
        todayTimestamp: Date.now(),
      });
      console.log('onLoad e ğŸš€ğŸš€ğŸš€', e);
      const pageKey = e.t;
      if (pageKey) {
        redirectPage(pageKey);
      }
    });
  },
})